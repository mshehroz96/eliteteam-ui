<!-- Layout wrapper -->
<div class="layout-wrapper layout-navbar-full layout-horizontal layout-without-menu">
  <div class="layout-container">
    <!-- Navbar -->
    <nav class="layout-navbar navbar navbar-expand-xl align-items-center bg-navbar-theme" id="layout-navbar">
      <div class="container-xxl">
        <div class="navbar-brand app-brand demo d-none d-xl-flex py-0 me-4">
          <a href="#" class="app-brand-link gap-2">
            <img src="../assets/img/branding/logo.jpg" style="height:50px; width:auto;" />
            <span class="app-brand-text demo menu-text fw-bolder"></span>
          </a>
          <a href="javascript:void(0);" class="layout-menu-toggle menu-link d-xl-none text-large ms-auto">
            <i class="bx bx-chevron-left bx-sm align-middle"></i>
          </a>
        </div>

        <div class="layout-menu-toggle navbar-nav d-xl-none align-items-xl-center me-3 me-xl-0">
          <a class="nav-item nav-link px-0 me-xl-4" href="javascript:void(0)">
            <i class="bx bx-menu bx-sm"></i>
          </a>
        </div>
      </div>
    </nav>

    <!-- / Navbar -->

    <!-- Layout container -->
    <div class="layout-page">
      <!-- Content wrapper -->
      <div class="content-wrapper">

        <!-- Content -->

        <div class="container-xxl flex-grow-1 container-p-y">
          <div class="row">
            <div class="col-md-6 offset-md-3" [appIsLoading]="loadingService.isLoading(this)">
              <h4 class="text-center">Register</h4>
              <form [formGroup]="registerForm">

                <div class="card mb-3">
                  <div class="card-body">
                    <h5>Company Information</h5>
                    <div class="row">

                      <div class="col-md-6 mb-3">
                        <label for="companyName" class="form-label">Company Name</label>
                        <input pInputText  formControlName="companyName" class="form-control" 
                          type="text" id="companyName"
                          name="companyName"
                          autofocus="">

                        <div *ngIf="submitted && f.companyName.errors" class="invalid-feedback">
                          <div *ngIf="f.companyName.errors.required">Company Name is required</div>
                        </div>
                      </div>
                      <div class="col-md-6 mb-3">
                        <label for="companyWebsite" class="form-label">Company
                          Website</label>
                        <input  placeholder="https://www.example.com" formControlName="companyWebsite"
                          class="form-control" type="url"
                          [ngClass]="{ 'is-invalid': submitted && f.companyWebsite.errors }" name="companyWebsite"
                          id="companyWebsite" value="" pInputText>
                        <div *ngIf="submitted && f.companyWebsite.errors" class="invalid-feedback">
                          <div *ngIf="f.companyWebsite.errors.required">Company Website is required</div>
                        </div>
                      </div>
                      <div class="col-md-6 mb-3">
                        <label for="industry" class="form-label">Industry</label>
                        <select formControlName="industry" [ngClass]="{ 'is-invalid': submitted && f.industry.errors }"
                          class="form-select" id="industry" name="industry">
                          <option value=""></option>
                          <option *ngFor="let item of data.industries" [value]="item.value">{{item.displayText}}</option>
                        </select>
                        <div *ngIf="submitted && f.industry.errors" class="invalid-feedback">
                          <div *ngIf="f.industry.errors.required">Industry is required</div>
                        </div>
                      </div>
                      
                      <div class="col-md-6 mb-3">
                        <label class="form-label" for="noOfEmployees">No. of Employees</label>
                        <select formControlName="noOfEmployees"  [ngClass]="{ 'is-invalid': submitted && f.industry.errors }"
                        class="form-select" name="noOfEmployees">
                        <option value=""></option>
                        <option *ngFor="let item of data.noOfEmployees" [value]="item.displayText">{{item.displayText}}</option>
                      </select>
                        <div *ngIf="submitted && f.noOfEmployees.errors" class="invalid-feedback">
                          <div *ngIf="f.noOfEmployees.errors.required">No. of Employees is required</div>
                        </div>
                      </div>
                      <div class="col-md-8 mb-3">
                        <label for="address" class="form-label">Address</label>
                        <input formControlName="address"  class="form-control" type="text" id="address"
                          [ngClass]="{ 'is-invalid': submitted && f.address.errors }" name="address" value="" placeholder="" pInputText>
                        <div *ngIf="submitted && f.address.errors" class="invalid-feedback">
                          <div *ngIf="f.address.errors.required">Address is required</div>
                        </div>
                      </div>
                      <div class="col-md-4 mb-3">
                        <label for="zipCode" class="form-label">Zip Code</label>
                        <input formControlName="zipCode"  class="form-control" appAllownumbersonly type="text" id="zipCode"
                          [ngClass]="{ 'is-invalid': submitted && f.zipCode.errors }" name="zipCode" value=""
                          placeholder="" pInputText>
                        <div *ngIf="submitted && f.zipCode.errors" class="invalid-feedback">
                          <div *ngIf="f.zipCode.errors.required">Zip Code is required</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>


                <div class="card mb-3">
                  <div class="card-body">
                    <h5>Contact Person</h5>
                    <div class="row">
                      <div class="col-md-2 mb-3">
                        <label for="userTitle" class="form-label">Title</label>
                        <select formControlName="titleLiid"
                          [ngClass]="{ 'is-invalid': submitted && f.titleLiid.errors }"
                          class="form-select" id="titleLiid" name="titleLiid">
                          <option value=""></option>
                          <option *ngFor="let item of data.titles" [value]="item.value">{{item.displayText}}</option>
                        </select>
                        <div *ngIf="submitted && f.titleLiid.errors" class="invalid-feedback">
                          <div *ngIf="f.titleLiid.errors.required">Title is required</div>
                        </div>
                      </div>
                      <div class="col-md-4 mb-3">
                        <label for="firstName" class="form-label">First Name</label>
                        <input formControlName="firstName"  class="form-control" type="text"
                          [ngClass]="{ 'is-invalid': submitted && f.firstName.errors }" id="firstName" name="firstName"
                          value="" autofocus="" pInputText/>
                        <div *ngIf="submitted && f.firstName.errors" class="invalid-feedback">
                          <div *ngIf="f.firstName.errors.required">First Name is required</div>
                        </div>
                      </div>
                      <div class="col-md-6 mb-3">
                        <label for="lastName" class="form-label">Last Name</label>
                        <input formControlName="lastName" class="form-control" type="text"
                          [ngClass]="{ 'is-invalid': submitted && f.lastName.errors }" name="lastName" id="lastName"
                          value="" pInputText>
                        <div *ngIf="submitted && f.lastName.errors" class="invalid-feedback">
                          <div *ngIf="f.lastName.errors.required">Last Name is required</div>
                        </div>
                      </div>
                      <div class="col-md-6 mb-3">
                        <label for="email" class="form-label">E-mail</label>
                        <input formControlName="email"  class="form-control"
                          [ngClass]="{ 'is-invalid': submitted && f.email.errors }" type="text" id="email" name="email"
                          value="" placeholder="john.doe@example.com" pInputText>
                        <div *ngIf="submitted && f.email.errors" class="invalid-feedback">
                          <div *ngIf="f.email.errors.required">E-mail is required</div>
                          <div *ngIf="!f.email.errors.required">E-mail is not valid</div>
                        </div>
                      </div>
                      <div class="col-md-4 mb-3">
                        <label class="form-label" for="phoneNumber">Phone Number</label>
                        <div [ngClass]="{ 'is-invalid': submitted && f.phoneNumber.errors }"
                          class="input-group input-group-merge">
                          <span class="input-group-text">US (+1)</span>
                          <input formControlName="phoneNumber" type="text" id="phoneNumber" name="phoneNumber"
                            class="form-control" placeholder="202 555 0111" pInputText>

                        </div>
                        <div *ngIf="submitted && f.phoneNumber.errors" class="invalid-feedback">
                          <div *ngIf="f.phoneNumber.errors.required">Phone Number is required</div>
                        </div>
                      </div>
                      <div class="col-md-2 mb-3">
                        <label for="ext" class="form-label">Ext.</label>
                        <input formControlName="ext" type="text" appAllownumbersonly
                          [ngClass]="{ 'is-invalid': submitted && f.ext.errors }" class="form-control" id="ext"
                          name="ext" pInputText>
                        <div *ngIf="submitted && f.ext.errors" class="invalid-feedback">
                          <div *ngIf="f.ext.errors.required">Ext is required</div>
                        </div>
                      </div>
                      <div class="col-md-6 mb-3">
                        <label class="form-label" for="cellNumber">Cell Number</label>
                        <div [ngClass]="{ 'is-invalid': submitted && f.cellNumber.errors }"
                          class="input-group input-group-merge">
                          <span class="input-group-text">US (+1)</span>
                          <input formControlName="cellNumber" type="text" id="cellNumber" name="cellNumber"
                            class="form-control" placeholder="202 555 0111" pInputText>
                        </div>
                        <div *ngIf="submitted && f.cellNumber.errors" class="invalid-feedback">
                          <div *ngIf="f.cellNumber.errors.required">Cell Number is required</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="card mb-3" *ngIf="matchingCompanies.length > 0">
                  <div class="card-body">
                    <h3>Looks like this company is already registered.</h3>
                    <h5>Please choose an option below to continue:.</h5>
                    <div class="row">
                      `<table class="datatables-users table border-top dataTable no-footer dtr-column">
                        <thead>
                          <tr>
                            <th>Company Name</th>
                            <th>Address</th>
                            <th>Website</th>
                            <th></th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let item of matchingCompanies">
                            <td>
                              {{item.companyName}}
                            </td>
                            <td>
                              {{item.address}}
                            </td>
                            <td>
                              {{item.companyWebsite }}
                            </td>
                            <td>
                              <button type="button" (click)="submit(item.companyId)"
                                class="btn btn-primary d-grid w-100">
                                <span>Select This Company</span>
                              </button>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                      <button  [disabled]="registerForm.invalid" type="button" (click)="submit(0)" class="btn btn-primary d-grid w-100">
                        <span> Create New</span>
                      </button>
                    </div>
                  </div>
                </div>
                <div class="btn-custom" *ngIf="matchingCompanies.length==0">
                  <button [disabled]="registerForm.invalid" (click)="submit(0)" class="btn btn-primary d-grid w-100">
                    Register 
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
        <!--/ Content -->
        
        <div class="content-backdrop fade"></div>
      </div>
      <!--/ Content wrapper -->
    </div>

    <!--/ Layout container -->
  </div>
</div>

<!-- Overlay -->
<div class="layout-overlay layout-menu-toggle"></div>

<!-- Drag Target Area To SlideIn Menu On Small Screens -->
<div class="drag-target"></div>
