{"ast":null,"code":"import { Event } from 'src/app/_models/event/event';\nimport * as moment from 'moment';\nimport Swal from 'sweetalert2';\nimport { FormControl } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/_services/user/user.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/material/form-field\";\nimport * as i4 from \"@angular/material/select\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/material/core\";\nimport * as i8 from \"@fullcalendar/angular\";\n\nfunction CalendarComponent_mat_option_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const topping_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", topping_r3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(topping_r3);\n  }\n}\n\nfunction CalendarComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"div\", 8)(2, \"div\", 9)(3, \"h4\", 25);\n    i0.ɵɵtext(4, \"Set My Availability \");\n    i0.ɵɵelementStart(5, \"a\", 26);\n    i0.ɵɵlistener(\"click\", function CalendarComponent_div_24_Template_a_click_5_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.Close1();\n    });\n    i0.ɵɵelement(6, \"i\", 27);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelement(7, \"div\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 28)(9, \"div\", 29)(10, \"div\", 30)(11, \"label\", 31);\n    i0.ɵɵtext(12, \"Time Range\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 32)(14, \"input\", 33);\n    i0.ɵɵlistener(\"ngModelChange\", function CalendarComponent_div_24_Template_input_ngModelChange_14_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.fromTime = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"span\", 34);\n    i0.ɵɵelement(16, \"i\", 35);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"input\", 33);\n    i0.ɵɵlistener(\"ngModelChange\", function CalendarComponent_div_24_Template_input_ngModelChange_17_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.toTime = $event;\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(18, \"div\", 36)(19, \"label\", 37);\n    i0.ɵɵtext(20, \"Date Range\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"div\", 32)(22, \"input\", 38);\n    i0.ɵɵlistener(\"ngModelChange\", function CalendarComponent_div_24_Template_input_ngModelChange_22_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.fromDate = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"span\", 34);\n    i0.ɵɵelement(24, \"i\", 35);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"input\", 38);\n    i0.ɵɵlistener(\"ngModelChange\", function CalendarComponent_div_24_Template_input_ngModelChange_25_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return ctx_r9.toDate = $event;\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(26, \"div\", 39)(27, \"button\", 40);\n    i0.ɵɵlistener(\"click\", function CalendarComponent_div_24_Template_button_click_27_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.setAvailability();\n    });\n    i0.ɵɵtext(28, \"Set Availability\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"a\", 41);\n    i0.ɵɵtext(30, \"Cancel\");\n    i0.ɵɵelementEnd()()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(14);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.fromTime);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.toTime);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.fromDate);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.toDate);\n  }\n}\n\nfunction CalendarComponent_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"div\", 8)(2, \"div\", 9)(3, \"h4\", 42);\n    i0.ɵɵtext(4, \"Schedule Client Meeting \");\n    i0.ɵɵelementStart(5, \"a\", 26);\n    i0.ɵɵlistener(\"click\", function CalendarComponent_div_25_Template_a_click_5_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.Close1();\n    });\n    i0.ɵɵelement(6, \"i\", 27);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelement(7, \"div\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 28)(9, \"div\", 29)(10, \"div\", 30)(11, \"label\", 43);\n    i0.ɵɵtext(12, \"Subject\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 32);\n    i0.ɵɵelement(14, \"input\", 44);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"div\", 36)(16, \"label\", 37);\n    i0.ɵɵtext(17, \"Date/Time\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"div\", 32)(19, \"input\", 45);\n    i0.ɵɵlistener(\"ngModelChange\", function CalendarComponent_div_25_Template_input_ngModelChange_19_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.fromDateTime = $event;\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(20, \"div\", 36)(21, \"label\", 37);\n    i0.ɵɵtext(22, \"Duration\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"div\", 32)(24, \"select\", 46)(25, \"option\", 47);\n    i0.ɵɵtext(26, \"15 Minutes\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"option\", 47);\n    i0.ɵɵtext(28, \"30 Minutes\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"option\", 47);\n    i0.ɵɵtext(30, \"45 Minutes\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"option\", 47);\n    i0.ɵɵtext(32, \"60 Minutes\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(33, \"div\", 39)(34, \"button\", 40);\n    i0.ɵɵlistener(\"click\", function CalendarComponent_div_25_Template_button_click_34_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.onScheduleMeeting();\n    });\n    i0.ɵɵtext(35, \"Schedule Client Meeting\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(36, \"a\", 41);\n    i0.ɵɵtext(37, \"Cancel\");\n    i0.ɵɵelementEnd()()()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(19);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.fromDateTime);\n  }\n}\n\nexport let CalendarComponent = /*#__PURE__*/(() => {\n  class CalendarComponent {\n    constructor(userService) {\n      this.userService = userService;\n      this.toppings = new FormControl('');\n      this.toppingList = ['Extra cheese', 'Mushroom', 'Onion', 'Pepperoni', 'Sausage', 'Tomato'];\n      this.fromDate = '';\n      this.toDate = '';\n      this.fromTime = '01:00:00';\n      this.toTime = '02:00:00';\n      this.fromDateTime = '';\n      this.EventData = new Event();\n      this.div1 = false;\n      this.div2 = false;\n      this.calendarOptions = {\n        headerToolbar: {\n          left: 'prev,next today',\n          center: 'title',\n          right: 'dayGridMonth,dayGridWeek,dayGridDay,listWeek,listDay'\n        },\n        buttonText: {\n          dayGridMonth: 'Month',\n          dayGridWeek: 'Week',\n          dayGridDay: 'Day'\n        },\n        initialView: 'dayGridMonth',\n        weekends: true,\n        editable: true,\n        selectable: true,\n        selectMirror: true,\n        dayMaxEvents: true,\n        select: this.handleDateSelect.bind(this)\n      };\n      this.getEvent();\n    }\n\n    ngOnInit() {}\n\n    setAvailability() {\n      if (this.calData != null) {\n        this.calData.addEvent({\n          id: 'a',\n          title: 'Available',\n          start: this.EventData.fromDate,\n          end: this.EventData.toDate,\n          allDay: true // color: 'green'\n\n        });\n      }\n\n      this.createEvent(this.EventData);\n    }\n\n    onScheduleMeeting() {\n      if (this.calData != null) {\n        this.calData.addEvent({\n          id: 'a',\n          title: 'Meeting',\n          start: this.EventData.fromDate,\n          allDay: true // color: 'green'\n\n        });\n      }\n\n      this.createEvent(this.EventData);\n    }\n\n    Close1() {\n      this.div1 = false;\n    }\n\n    div1Function() {\n      if (this.div1 == false) {\n        this.div1 = true;\n      } else {\n        this.div1 = false;\n      }\n    }\n\n    div2Function() {\n      if (this.div2 == false) {\n        this.div2 = true;\n      } else {\n        this.div2 = false;\n      }\n    }\n\n    getEvent() {\n      this.userService.getAllUserEvents(1).subscribe(res => {\n        if (res === null || res === void 0 ? void 0 : res.success) {\n          this.calendarOptions.events = [];\n          let event = res.data;\n\n          const _obj = res.data.map(row => {\n            return {\n              id: row.eventId,\n              title: row.title,\n              start: moment(row.fromDate).format('YYYY-MM-DD')\n            };\n          }); // let finalArray = event.map(v => ({ ...v , id : v.eventId , start: moment(v.fromDate).format('YYYY-MM-DD') }))\n          // let finalresult = finalArray.map(({id , title , start}) => ({id , title , start }))\n          // let finalresult = event.map(({eventId , title }) => ({eventId , title }))\n          // console.log(finalresult);\n\n\n          this.calendarOptions.events = _obj;\n        } else {\n          this.calendarOptions.events = [];\n        }\n      });\n    } // Get RealTime Calendar Values\n\n\n    handleDateSelect(selectInfo) {\n      this.div1 = false;\n      this.div2 = false;\n      const calendarApi = selectInfo.view.calendar;\n      console.log(selectInfo.startStr);\n      console.log(selectInfo.endStr); // calendarApi.unselect();\n\n      Swal.fire({\n        // title: 'Do you want to save the changes?',\n        showDenyButton: true,\n        // showCancelButton: true,\n        confirmButtonText: 'Set My Availibility',\n        confirmButtonColor: '#B3DB6A',\n        allowEscapeKey: true,\n        denyButtonText: 'Schedual Client Meeting',\n        denyButtonColor: '#0096FF'\n      }).then(result => {\n        /* Read more about isConfirmed, isDenied below */\n        if (result.isConfirmed) {\n          this.div1Function();\n          this.fromDate = moment(selectInfo.start).format('YYYY-MM-DD');\n          this.toDate = moment(selectInfo.end).format('YYYY-MM-DD');\n          var ev = {\n            eventId: 4,\n            title: 'Available',\n            fromDate: selectInfo.start,\n            toDate: selectInfo.end,\n            eventTypeId: 3,\n            clientUserId: 5,\n            status: 1\n          };\n          this.EventData = ev;\n          this.calData = calendarApi; // Swal.fire('Saved!', '', 'success') \n        } else if (result.isDenied) {\n          this.div2Function();\n          var ev = {\n            eventId: 4,\n            title: \"\",\n            fromDate: selectInfo.start,\n            toDate: selectInfo.end,\n            eventTypeId: 3,\n            clientUserId: 1,\n            status: 1\n          };\n          this.EventData = ev;\n          this.calData = calendarApi;\n          this.fromDateTime = moment(selectInfo.start).format('YYYY-MM-DD HH:mm:ss');\n          console.log(this.fromDateTime); // Swal.fire('Changes are not saved', '', 'info')\n        }\n      });\n    }\n\n    createEvent(e) {\n      this.userService.createEvent(e).subscribe(() => e);\n    }\n\n  }\n\n  CalendarComponent.ɵfac = function CalendarComponent_Factory(t) {\n    return new (t || CalendarComponent)(i0.ɵɵdirectiveInject(i1.UserService));\n  };\n\n  CalendarComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CalendarComponent,\n    selectors: [[\"app-calendar\"]],\n    decls: 29,\n    vars: 5,\n    consts: [[1, \"layout-wrapper\", \"layout-navbar-full\", \"layout-horizontal\", \"layout-without-menu\"], [1, \"layout-container\"], [1, \"layout-page\"], [1, \"content-wrapper\"], [1, \"container-xxl\", \"flex-grow-1\", \"container-p-y\"], [1, \"row\"], [1, \"col-8\"], [1, \"card\", \"card-action\", \"mb-4\"], [1, \"card-header\"], [1, \"card-action-title\"], [\"appearance\", \"fill\", 1, \"float-end\"], [\"multiple\", \"\", 3, \"formControl\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"card-action-element\"], [1, \"list-inline\", \"mb-0\"], [1, \"list-inline-item\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-dark\"], [1, \"card-body\"], [3, \"options\"], [1, \"col-4\"], [\"class\", \"card card-action mb-4 \", 4, \"ngIf\"], [1, \"content-backdrop\", \"fade\"], [1, \"layout-overlay\", \"layout-menu-toggle\"], [1, \"drag-target\"], [3, \"value\"], [1, \"text-success\"], [\"href\", \"\", 1, \"float-end\", \"align-top\", \"text-black\", \"proxy_calendar_side_panel_close\", 3, \"click\"], [1, \"bx\", \"bx-x\", \"bx-md\"], [1, \"collapse\", \"show\"], [1, \"card-body\", \"pt-0\"], [1, \"\"], [1, \"form-label\"], [1, \"input-group\"], [\"type\", \"time\", \"value\", \"\", 1, \"form-control\", \"text-center\", \"flatpickr-input\", 3, \"ngModel\", \"ngModelChange\"], [1, \"input-group-text\"], [1, \"bx\", \"bxs-right-arrow-alt\", \"bx-sm\"], [1, \"mt-4\"], [\"for\", \"txbNewEventDateRange\", 1, \"form-label\"], [\"type\", \"date\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"pt-4\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [\"href\", \"#\", 1, \"btn\", \"btn-secondary\", \"proxy_calendar_side_panel_close\", 2, \"margin-left\", \"20px\"], [1, \"text-info\"], [\"for\", \"txbNewEventTimeRangeFrom\", 1, \"form-label\"], [\"value\", \"\", 1, \"form-control\", \"text-center\", \"flatpickr-input\"], [\"type\", \"datetime-local\", \"id\", \"txbNewEventDateRange\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"\", \"id\", \"\", 1, \"form-control\"], [\"value\", \"\"]],\n    template: function CalendarComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4);\n        i0.ɵɵelement(5, \"router-outlet\");\n        i0.ɵɵelementStart(6, \"div\", 5)(7, \"div\", 6)(8, \"div\", 7)(9, \"div\", 8)(10, \"div\", 9)(11, \"mat-form-field\", 10)(12, \"mat-label\");\n        i0.ɵɵtext(13, \"Jobs\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"mat-select\", 11);\n        i0.ɵɵtemplate(15, CalendarComponent_mat_option_15_Template, 2, 2, \"mat-option\", 12);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(16, \"div\", 13)(17, \"ul\", 14)(18, \"li\", 15)(19, \"button\", 16);\n        i0.ɵɵtext(20, \"Filter\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(21, \"div\", 17);\n        i0.ɵɵelement(22, \"full-calendar\", 18);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(23, \"div\", 19);\n        i0.ɵɵtemplate(24, CalendarComponent_div_24_Template, 31, 4, \"div\", 20);\n        i0.ɵɵtemplate(25, CalendarComponent_div_25_Template, 38, 1, \"div\", 20);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(26, \"div\", 21);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelement(27, \"div\", 22)(28, \"div\", 23);\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(14);\n        i0.ɵɵproperty(\"formControl\", ctx.toppings);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.toppingList);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"options\", ctx.calendarOptions);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.div1);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.div2);\n      }\n    },\n    directives: [i2.RouterOutlet, i3.MatFormField, i3.MatLabel, i4.MatSelect, i5.NgControlStatus, i5.FormControlDirective, i6.NgForOf, i7.MatOption, i8.FullCalendarComponent, i6.NgIf, i5.DefaultValueAccessor, i5.NgModel, i5.NgSelectOption, i5.ɵNgSelectMultipleOption],\n    styles: [\"@import\\\"https://fonts.googleapis.com\\\";@import\\\"https://fonts.gstatic.com\\\";@import\\\"https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap\\\";\"]\n  });\n  return CalendarComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}